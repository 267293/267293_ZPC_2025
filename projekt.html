<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Individuální projekt - Moje portfolio ZPC</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Hover trigger for navbar -->
    <div class="navbar-trigger"></div>
    
    <!-- Top navigation bar -->
    <nav class="top-navbar">
        <div class="navbar-container">
            <div class="navbar-menu">
                <div class="navbar-item dropdown active">
                    <a href="#" class="dropdown-toggle">
                        Projekty <i class="fas fa-chevron-down"></i>
                    </a>
                    <div class="dropdown-menu">
                        <a href="projekt.html" class="dropdown-item active">
                            <i class="fas fa-flask"></i>
                            Individuální projekt
                        </a>
                        <div class="dropdown-divider"></div>
                        <a href="mini-projekty/plotter.html" class="dropdown-item">
                            <i class="fas fa-cut"></i>
                            Práce na plotteru
                        </a>
                        <a href="mini-projekty/laser.html" class="dropdown-item">
                            <i class="fas fa-laser-pointer"></i>
                            Laserové řezání
                        </a>
                        <a href="mini-projekty/3d-tisk.html" class="dropdown-item">
                            <i class="fas fa-cube"></i>
                            3D tisk
                        </a>
                        <a href="mini-projekty/3d-skenovani.html" class="dropdown-item">
                            <i class="fas fa-search"></i>
                            3D skenování
                        </a>
                        <a href="mini-projekty/elektro.html" class="dropdown-item">
                            <i class="fas fa-microchip"></i>
                            Elektronika
                        </a>
                    </div>
                </div>
                <a href="o-mne.html" class="navbar-item">O mně</a>
            </div>
        </div>
    </nav>

    <div class="container">
        <!-- Header with title and dark mode toggle -->
        <header>
            <h1>Individuální projekt</h1>
            <button class="dark-mode-toggle" onclick="toggleDarkMode()">
                <i class="fas fa-moon"></i>
            </button>
        </header>

        <!-- Navigation back -->
        <nav class="breadcrumb">
            <a href="index.html" class="back-link">
                <i class="fas fa-arrow-left"></i>
                Zpět na hlavní stránku
            </a>
        </nav>

        <!-- Main content -->
        <main class="page-content">
            <!-- Media Gallery Slider -->
            <div class="media-gallery-slider">
                <div class="slider-container">
                    <button class="slider-btn prev" onclick="moveSlide(-1)">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    
                    <div class="slider-wrapper">
                        <div class="slider-track" id="sliderTrack">
                            <!-- Video 1 -->
                            <div class="slide" onclick="openModal(0)">
                                <div class="media-container">
                                    <video src="images/projekt_video.mp4" muted></video>
                                    <div class="play-icon"><i class="fas fa-play-circle"></i></div>
                                </div>
                                <p class="slide-caption">Video projektu</p>
                            </div>
                            
                            <!-- Fotka 1 - stroj -->
                            <div class="slide" onclick="openModal(1)">
                                <div class="media-container">
                                    <img src="images/stroj.jpg" alt="První skica">
                                </div>
                                <p class="slide-caption">První skica</p>
                            </div>
                            
                            <!-- Fotka 2 - render 1 -->
                            <div class="slide" onclick="openModal(2)">
                                <div class="media-container">
                                    <img src="images/render1_projekt.jpg" alt="3D render 1">
                                </div>
                                <p class="slide-caption">3D render 1</p>
                            </div>

                            <!-- Fotka 3 - render 3 -->
                            <div class="slide" onclick="openModal(3)">
                                <div class="media-container">
                                    <img src="images/render3_projekt.jpg" alt="3D render 2">
                                </div>
                                <p class="slide-caption">3D render 2</p>
                            </div>

                            <!-- Fotka 4 - render 2 -->
                            <div class="slide" onclick="openModal(4)">
                                <div class="media-container">
                                    <img src="images/render2_projekt.jpg" alt="3D render 3">
                                </div>
                                <p class="slide-caption">3D render 3</p>
                            </div>

                            <!-- Fotka 5 - render 4 -->
                            <div class="slide" onclick="openModal(5)">
                                <div class="media-container">
                                    <img src="images/render4_projekt.jpg" alt="3D render 4">
                                </div>
                                <p class="slide-caption">3D render 4</p>
                            </div>
                            
                            <!-- Fotka 6 - zapojení -->
                            <div class="slide" onclick="openModal(6)">
                                <div class="media-container">
                                    <img src="images/zapojení_projekt.jpg" alt="Návrh zapojení">
                                </div>
                                <p class="slide-caption">Návrh zapojení</p>
                            </div>
                        </div>
                    </div>
                    
                    <button class="slider-btn next" onclick="moveSlide(1)">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
                
                <div class="slider-dots" id="sliderDots"></div>
            </div>

            <!-- Modal for fullscreen view -->
            <div id="mediaModal" class="modal" onclick="closeModal()">
                <span class="modal-close">&times;</span>
                <button class="modal-nav prev" onclick="event.stopPropagation(); changeModalSlide(-1)">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <div class="modal-content-wrapper">
                    <div class="modal-content" id="modalContent"></div>
                </div>
                <button class="modal-nav next" onclick="event.stopPropagation(); changeModalSlide(1)">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>

            <div class="content-section">
                <h2>Popis projektu</h2>
                <p>
                    Téma mého individuálního projektu je Desinfekční box na elektrinická zařízení. Mobily, hodinky, sluchátka jsou elektronická zařízení, která používáme skoro neustále. Patří k našemu každodennímu životu a máme je neustále v ruce, a proto je důležité si uvědomit, že největšími nosiči bakterii jsou právě tato zařízení. A k tomu slouží toto zařízení, do boxu vložíte zařízení a pomocí desinfekčního cyklu dojde ke zničení bakterii a všech nečistot na površích zařízení. 
                </p>
                <p>
                    Box bude ovládán pomocí pohybového senzoru. Ten zaznamená pohyb a pošle informaci aby se otevřely dvířka boxu. Po odbytí lhůty se box zase zavře. Všechny procesy lze sledovat na led displeyi. Po uzavření komory se spustí čistící cyklus, který je realizován pomocí zrdcadlově uložených UVC led svítidel. Až proběhne cyklus, automaticky se otevřou dvířka boxu.
                </p>

            </div>

            <div class="content-section">
                <h2>Plánované technologie</h2>
                <ul class="tech-list">
                    <li>3D modelování a tisk</li>
                    <li>Programování mikrokontrolérů</li>
                    <li>Senzory a aktuátory</li>
                </ul>
            </div>

            <div class="content-section">
                <h2>Použitá elektronika</h2>
                <ul class="tech-list">
                    <li>LCD displey</li>
                    <li>Ultrazvukový senzor</li>
                    <li>Servo motor</li>
                    <li>UVC LED</li>
                </ul>
            </div>

            <div class="content-section">
                <h2>Kód desinfekčního boxu</h2>
                <div class="code-preview" onclick="openCodeModal('arduinoCode')">
                    <pre id="arduinoCode"><code>#include &lt;Servo.h&gt;
#include &lt;Wire.h&gt;
#include &lt;LiquidCrystal_I2C.h&gt;

bool servoMoved = false;

#define tPin 4          // Trigger pin
#define ePin 5          // Echo pin
#define sPin_1 9        // Servo 1
#define sPin_2 10       // Servo 2
#define LED 11          // LED
#define servoSpeed 20   // Zpoždění mezi kroky

#define SERVO1_CLOSED 0
#define SERVO1_OPEN   90
#define SERVO2_CLOSED 90
#define SERVO2_OPEN   0

enum BoxState {
  WAITING, INSERT_PHONE,
  CLOSING, DISINFECTING,
  REMOVE_PHONE
};

BoxState boxState = WAITING;
unsigned long stateStartTime = 0;

LiquidCrystal_I2C lcd(0x27, 16, 2);
Servo servo_1, servo_2;

// České znaky
byte e_hacek[8] = {B01010,B00100,B01110,B10001,B11111,B10000,B01110,B00000};
byte a_carka[8] = {B00010,B00100,B01110,B00001,B01111,B10001,B01111,B00000};

long getDistance();
void setup() {
  pinMode(ePin, INPUT);
  pinMode(tPin, OUTPUT);
  digitalWrite(tPin, LOW);
  
  servo_1.attach(sPin_1);
  servo_2.attach(sPin_2);
  delay(200);
  servo_1.write(SERVO1_CLOSED);
  servo_2.write(SERVO2_CLOSED);
  delay(300);
  
  pinMode(LED, OUTPUT);
  digitalWrite(LED, LOW);
  
  lcd.begin();
  lcd.createChar(0, e_hacek);
  lcd.createChar(1, a_carka);
  lcd.backlight();
  lcd.print("System ready");
}

void loop() {
  switch (boxState) {
    case WAITING: {
      long distance = getDistance();
      if (distance &lt;= 15 &amp;&amp; distance &gt; 0) {
        OpenServo();
        boxState = INSERT_PHONE;
        stateStartTime = millis();
      }
      break;
    }
    case INSERT_PHONE: {
      if (millis() - stateStartTime &gt;= 3000) {
        boxState = CLOSING;
        stateStartTime = millis();
      }
      break;
    }
    case CLOSING: {
      CloseServo();
      digitalWrite(LED, HIGH);
      boxState = DISINFECTING;
      stateStartTime = millis();
      break;
    }
    case DISINFECTING: {
      if (millis() - stateStartTime &gt;= 10000) {
        digitalWrite(LED, LOW);
        OpenServo();
        boxState = REMOVE_PHONE;
        stateStartTime = millis();
      }
      break;
    }
    case REMOVE_PHONE: {
      if (millis() - stateStartTime &gt;= 4000) {
        CloseServo();
        boxState = WAITING;
      }
      break;
    }
  }
}

void OpenServo() {
  int d1 = SERVO1_OPEN - SERVO1_CLOSED;
  int d2 = SERVO2_OPEN - SERVO2_CLOSED;
  int steps = max(abs(d1), abs(d2));
  
  for (int s = 0; s &lt;= steps; s++) {
    int a1 = SERVO1_CLOSED + (d1 * s) / steps;
    int a2 = SERVO2_CLOSED + (d2 * s) / steps;
    servo_1.write(constrain(a1, 0, 180));
    servo_2.write(constrain(a2, 0, 180));
    delay(servoSpeed);
  }
}

void CloseServo() {
  int d1 = SERVO1_OPEN - SERVO1_CLOSED;
  int d2 = SERVO2_OPEN - SERVO2_CLOSED;
  int steps = max(abs(d1), abs(d2));
  
  for (int s = steps; s &gt;= 0; s--) {
    int a1 = SERVO1_CLOSED + (d1 * s) / steps;
    int a2 = SERVO2_CLOSED + (d2 * s) / steps;
    servo_1.write(constrain(a1, 0, 180));
    servo_2.write(constrain(a2, 0, 180));
    delay(servoSpeed);
  }
}

long getDistance() {
  digitalWrite(tPin, LOW);
  delayMicroseconds(2);
  digitalWrite(tPin, HIGH);
  delayMicroseconds(10);
  digitalWrite(tPin, LOW);
  
  long duration = pulseIn(ePin, HIGH);
  return (duration * 0.0343) / 2;
}</code></pre>
                    <div class="code-preview-overlay">
                        <span class="code-preview-hint">Klikni pro rozšíření</span>
                    </div>
                </div>
            </div>

            <!-- Code Modal -->
            <div id="codeModal" class="code-modal" onclick="closeCodeModal(event)">
                <div class="code-modal-content" onclick="event.stopPropagation()">
                    <button class="code-modal-close" onclick="closeCodeModal()">&times;</button>
                    <h3 id="codeModalTitle">Kód desinfekčního boxu</h3>
                    <div class="code-modal-body">
                        <pre id="codeModalCode"><code></code></pre>
                    </div>
                </div>
            </div>

            <div class="content-section"> 
                <h2>Časový plán</h2>
                <div class="timeline">
                    <div class="timeline-item">
                        <h3>Týden 5-6: Návrh a plánování</h3>
                        <p>Definice problému, výzkum, první návrhy</p>
                    </div>
                    <div class="timeline-item">
                        <h3>Týden 7-8: Prototypování</h3>
                        <p>První prototypy, testování konceptu</p>
                    </div>
                    <div class="timeline-item">
                        <h3>Týden 9-10: Výroba</h3>
                        <p>Finální výroba všech komponent</p>
                    </div>
                    <div class="timeline-item">
                        <h3>Týden 11-12: Testování a dokončení</h3>
                        <p>Finální testování, dokumentace</p>
                    </div>
                </div>
            </div>

            
        </main>
    </div>

    <script>
        function toggleDarkMode() {
            document.body.classList.toggle('light-mode');
            const icon = document.querySelector('.dark-mode-toggle i');
            if (document.body.classList.contains('light-mode')) {
                icon.className = 'fas fa-sun';
            } else {
                icon.className = 'fas fa-moon';
            }
        }

        // Mobile dropdown toggle
        document.addEventListener('DOMContentLoaded', function() {
            const dropdown = document.querySelector('.dropdown');
            const dropdownToggle = document.querySelector('.dropdown-toggle');
            
            if (dropdownToggle) {
                dropdownToggle.addEventListener('click', function(e) {
                    if (window.innerWidth <= 768) {
                        e.preventDefault();
                        dropdown.classList.toggle('active');
                    }
                });
            }
            
            // Initialize slider dots
            initSliderDots();
        });

        // Media Gallery Slider
        let currentSlide = 0;
        const mediaItems = [
            { type: 'video', src: 'images/projekt_video.mp4', caption: 'Video projektu' },
            { type: 'image', src: 'images/stroj.jpg', caption: 'První skica' },
            { type: 'image', src: 'images/render1_projekt.jpg', caption: '3D render 1' },
            { type: 'image', src: 'images/render3_projekt.jpg', caption: '3D render 2' },
            { type: 'image', src: 'images/render2_projekt.jpg', caption: '3D render 3' },
            { type: 'image', src: 'images/render4_projekt.jpg', caption: '3D render 4' },
            { type: 'image', src: 'images/zapojení_projekt.jpg', caption: 'Návrh zapojení' }
        ];

        function initSliderDots() {
            const dotsContainer = document.getElementById('sliderDots');
            dotsContainer.innerHTML = '';
            for (let i = 0; i < mediaItems.length; i++) {
                const dot = document.createElement('span');
                dot.className = 'dot' + (i === 0 ? ' active' : '');
                dot.onclick = () => goToSlide(i);
                dotsContainer.appendChild(dot);
            }
        }

        function moveSlide(direction) {
            const slides = document.querySelectorAll('.slide');
            const totalSlides = slides.length;
            currentSlide = (currentSlide + direction + totalSlides) % totalSlides;
            updateSlider();
        }

        function goToSlide(index) {
            currentSlide = index;
            updateSlider();
        }

        function updateSlider() {
            const track = document.getElementById('sliderTrack');
            const slideWidth = document.querySelector('.slide').offsetWidth;
            const gap = 20;
            track.style.transform = `translateX(-${currentSlide * (slideWidth + gap)}px)`;
            
            const dots = document.querySelectorAll('.dot');
            dots.forEach((dot, index) => {
                dot.classList.toggle('active', index === currentSlide);
            });
        }

        let currentModalSlide = 0;

        function openModal(index) {
            currentModalSlide = index;
            const modal = document.getElementById('mediaModal');
            modal.style.display = 'flex';
            updateModalContent();
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            const modal = document.getElementById('mediaModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
            const video = modal.querySelector('video');
            if (video) video.pause();
        }

        function changeModalSlide(direction) {
            currentModalSlide = (currentModalSlide + direction + mediaItems.length) % mediaItems.length;
            updateModalContent();
        }

        function updateModalContent() {
            const modalContent = document.getElementById('modalContent');
            const item = mediaItems[currentModalSlide];
            
            if (item.type === 'video') {
                modalContent.innerHTML = `<video controls autoplay style="max-width: 90%; max-height: 80vh;"><source src="${item.src}" type="video/mp4"></video><p class="modal-caption">${item.caption}</p>`;
            } else {
                modalContent.innerHTML = `<img src="${item.src}" alt="${item.caption}" style="max-width: 90%; max-height: 80vh;"><p class="modal-caption">${item.caption}</p>`;
            }
        }

        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') closeModal();
        });

        // Code Modal functionality
        function openCodeModal(codeId) {
            const codeElement = document.getElementById(codeId);
            const codeContent = codeElement.textContent;
            const codeModal = document.getElementById('codeModal');
            const codeModalCode = document.querySelector('#codeModalCode code');
            
            codeModalCode.textContent = codeContent;
            codeModal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closeCodeModal(event) {
            if (event && event.target !== event.currentTarget) return;
            
            const codeModal = document.getElementById('codeModal');
            codeModal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                const codeModal = document.getElementById('codeModal');
                if (codeModal && codeModal.style.display === 'flex') closeCodeModal();
            }
        });
    </script>
</body>
</html>
